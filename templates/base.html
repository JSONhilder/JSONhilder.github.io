<!DOCTYPE html>
<html lang="en">
    {% include "partials/head.html" %}
    <body class="dark-mode">
        {% include "partials/navbar.html" %}

        {% block content %} {% endblock %}
        {% block js %} {% endblock %}

        <script>
            window.addEventListener('load', function() {
                if(localStorage.getItem('light-mode') !== null) {
                    switchTheme();
                    document.getElementById('theme-switch').innerHTML = 'Dark Mode';
                }
            });

            document.getElementById('theme-switch').addEventListener('click', function() {
                setThemeHistory();
                switchTheme();
            });

            function setThemeHistory() {
                if(localStorage.getItem('light-mode') === null) {
                    localStorage.setItem('light-mode', true);
                    document.getElementById('theme-switch').innerHTML = 'Dark Mode';
                } else {
                    localStorage.removeItem('light-mode');
                    document.getElementById("theme-switch").innerHTML = 'Light Mode';
                }
            }

            function switchTheme() {
                var cup_fill = document.querySelector('.fillin');
                if(cup_fill !== null) cup_fill.style.display = 'none';

                document.body.classList.toggle('dark-mode');
                // Timeout to fix weird css effect
                setTimeout(function() {
                    if(cup_fill !== null) cup_fill.style.display = 'block';
                }, 100);
            }

        </script>
    </body>
    {% include "partials/footer.html" %}
</html>
